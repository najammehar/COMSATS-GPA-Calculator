$(document).ready((function(){$(".fb").click((function(){$("#feedbackDialog").show()})),$("#closeDialogBtn").click((function(){$("#feedbackDialog").hide()})),$("#closeDialogSuccessBtn").click((function(){$("#feedbackResult").hide()})),$("#feedbackForm").submit((function(e){e.preventDefault();var t=$("#fullname").val(),o=$("#email").val(),n=$("#message").val();if(""!==t.trim()&&""!==o.trim()&&""!==n.trim()){var s=$("#sendBtn");s.prop("disabled",!0),s.html('Sending... <span class="spinner"></span>'),emailjs.send("service_teiwvjf","template_z38nehr",{name:t,email:o,message:n},"i_sIGUfnwlsJYGhnH").then((function(e){$("#feedbackForm")[0].reset(),$("#feedbackDialog").hide(),$("#feedbackResult").show(),s.prop("disabled",!1),s.html("Send")}),(function(e){console.log("Error sending email:",e),alert("Error sending feedback. Please try again later."),s.prop("disabled",!1),s.html("Send")}))}else alert("Please fill in all fields")}));var e=new ProgressBar.Circle("#gpa-container",{color:"#E0E2E6",strokeWidth:8,trailWidth:8,easing:"easeInOut",duration:1e3,text:{autoStyleContainer:!1},from:{color:"#FF0000",width:8},to:{color:"#1E1F4A",width:8},step:function(e,t){t.path.setAttribute("stroke",e.color),t.path.setAttribute("stroke-width",e.width);var o=(4*t.value()).toFixed(2);0===o?t.setText("0.00"):t.setText(o),t.text.style.color="#000000",t.text.style.textAlign="center";var n=document.createElement("div");n.innerHTML="GPA",n.style.fontSize="1.8rem",n.style.fontWeight="700",n.style.color="#000000",n.style.textAlign="center",t.text.appendChild(n)}});e.text.style.fontFamily='"colfax", sans-serif',e.text.style.fontSize="2rem";var t=new ProgressBar.Circle("#required-gpa-container",{color:"#E0E2E6",strokeWidth:8,trailWidth:8,easing:"easeInOut",duration:1e3,text:{autoStyleContainer:!1},from:{color:"#FF0000",width:8},to:{color:"#1E1F4A",width:8},step:function(e,t){t.path.setAttribute("stroke",e.color),t.path.setAttribute("stroke-width",e.width);var o=(4*t.value()).toFixed(2);0===o?t.setText("0.00"):t.setText(o),t.text.style.textAlign="center",t.text.style.color="#000000",t.text.innerHTML=o+'<div style="font-size: 1.1rem; color: #000000; font-weight:700;">Required GPA</div>'}});function o(){let t=0,o=0;$(".course").each((function(){let e=parseFloat($(this).find(".course-gpa").val()),n=parseFloat($(this).find(".course-credits").val());isNaN(e)||isNaN(n)||(t+=e*n,o+=n)}));let n=o>0?(t/o).toFixed(2):"0.00";if($("#gpa-result").text(n),e.animate(n/4),o>0){let e="";e=n>=3.5?"Excellent":n>=3?"Very Good":n>=2.5?"Good":n>=2?"Satisfactory":n>=1.5?"Pass":n>=1?"Low Pass":"Fail",$(".gpa-instruction").html(`\n            <p class="text mb-1">Based on COMSATS' GPA policy, this calculator lets you enter course details, GPA, and credits for instant results.</p>\n            <p class="result mb-1">Detailed Result</p>\n            <p class="text mb-1">Total Credit Hours: ${o}</p>\n            <p class="text mb-1">Honor Points: ${t.toFixed(2)}</p>\n            <p class="text mb-1">GPA: ${n}</p>\n            <hr>\n            <p class="text mt-1">${e}</p>\n        `)}else $(".gpa-instruction").html('\n            <p class="text mb-1">Based on COMSATS\' GPA policy, this calculator lets you enter course details, GPA, and credits for instant results.</p>\n            <p class="result mb-1">Detailed Result</p>\n            <p class="text mb-1">Total Credit Hours: 0</p>\n            <p class="text mb-1">Honor Points: 0.00</p>\n            <p class="text mb-1">GPA: 0.00</p>\n            <hr>\n            <p class="text mt-1">No remarks</p>\n        ')}function n(e,t){$(`#${e}-error`).text(t).css("color","red")}function s(e){$(`#${e}-error`).text("")}function a(e,t,o){let a=parseFloat($(`#${e}`).val());return"current-cgpa"===e||"target-gpa"===e?null===a||a>=t&&a<=o?(s(e),!0):(n(e,`Please enter a valid value between ${t} and ${o}.`),!1):isNaN(a)||a<=t?(n(e,`Please enter a value greater than ${t}`),!1):(s(e),!0)}function i(){$("#gpa-calculator").show(),$("#cgpa-calculator").hide(),$("#calculator-type").val("gpa"),$("html, body").animate({scrollTop:$("#gpa-calculator").offset().top-20},500)}function r(){$("#gpa-calculator").hide(),$("#cgpa-calculator").show(),$("#calculator-type").val("cgpa"),$("html, body").animate({scrollTop:$("#cgpa-calculator").offset().top-20},500)}t.text.style.fontFamily='"colfax", sans-serif',t.text.style.fontSize="2rem",$("#add-course").click((function(){$("#course-container").append('\n        <div class="course">\n            <div class="course-input">\n                <input type="text" class="course-name" placeholder="Course">\n                \x3c!-- <input type="number" class="course-gpa" placeholder="GPA" step="0.01" min="0" max="4"> --\x3e\n                <select class="course-gpa">\n                    <option selected="selected" disabled="disabled" hidden="hidden">GPA</option>\n                    <option value="4.00">4.00</option>\n                    <option value="3.66">3.66</option>\n                    <option value="3.33">3.33</option>\n                    <option value="3.00">3.00</option>\n                    <option value="2.66">2.66</option>\n                    <option value="2.33">2.33</option>\n                    <option value="2.00">2.00</option>\n                    <option value="1.66">1.66</option>\n                    <option value="1.33">1.33</option>\n                    <option value="1.00">1.00</option>\n                    <option value="0.00">0.00</option>\n                  </select>\n                <input type="number" class="course-credits" placeholder="Credit Hours" min="0">\n            </div>\n            <div class="remove-course"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="grey"><path d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg></div>\n        </div>\n        ')})),$(document).on("change",".course-gpa",(function(){""!==$(this).val()?$(this).css("color","black"):$(this).css("color","grey")})),$(document).on("click",".remove-course",(function(){$(this).closest(".course").remove(),o()})),$(document).on("input",".course-gpa, .course-credits",(function(){o()})),$(".course-credits").on("input",(function(){parseFloat($(this).val())<=0&&(alert("Please enter a value greater than 0"),$(this).val(""))})),$("#current-cgpa, #current-credits, #target-gpa, #target-credits").on("input",(function(){a(this.id,this.min,this.max)})),$("#calculate-required-gpa").click((function(){(function(){let e=a("current-cgpa",0,4),t=a("current-credits",0,1/0),o=a("target-gpa",0,4),n=a("target-credits",0,1/0);return e&&t&&o&&n})()&&function(){let e=parseFloat($("#current-cgpa").val()),o=parseFloat($("#current-credits").val()),n=parseFloat($("#target-gpa").val()),s=parseFloat($("#target-credits").val()),a=((n*(o+s)-e*o)/s).toFixed(2);if(a>4)$("#required-gpa-result").text("Not Possible"),t.set(1),t.text.style.color="#FF0000",t.text.innerHTML="Not Possible",$(".required-gpa-instruction").html(`\n                <p class="text mb-1">Determine the minimum GPA needed in future courses to raise or maintain your desired GPA level.</p>\n                <p class="result mb-1">Detailed Result</p>\n                <p class="text mb-1">Desired CGPA: ${n}</p>\n                <p class="text mb-1">Current CGPA: ${e}</p>\n                <p class="text mb-1">Additional Credits: ${s}</p>\n                <p class="text mb-1" style="color:#FF0000;">Required GPA: Not Possible</p>\n                <hr>\n                <p class="text mt-1" style="color:#FF0000;">Achieving the desired GPA is not possible with the given credits.</p>\n            `);else if(a<=0)$("#required-gpa-result").text("0"),t.set(0),t.text.style.color="#000000",t.text.innerHTML="0",$(".required-gpa-instruction").html(`\n                <p class="text mb-1">Determine the minimum GPA needed in future courses to raise or maintain your desired GPA level.</p>\n                <p class="result mb-1">Detailed Result</p>\n                <p class="text mb-1">Desired CGPA: ${n}</p>\n                <p class="text mb-1">Current CGPA: ${e}</p>\n                <p class="text mb-1">Additional Credits: ${s}</p>\n                <p class="text mb-1">Required GPA: 0</p>\n                <hr>\n                <p class="text mt-1" style="color:#FF0000;">You do not need any GPA to achieve the desired GPA.</p>\n            `);else{$("#required-gpa-result").text(a),t.animate(a/4);let o="";o=a>=3.5?"You need an Excellent performance":a>=3?"You need a Very Good performance":a>=2.5?"You need a Good performance":a>=2?"You need a Satisfactory performance":a>=1.5?"You need a Pass performance":a>=1?"You need a Low Pass performance":"You need a Fail performance",$(".required-gpa-instruction").html(`\n                <p class="text mb-1">Determine the minimum GPA needed in future courses to raise or maintain your desired GPA level.</p>\n                <p class="result mb-1">Detailed Result</p>\n                <p class="text mb-1">Desired GPA: ${n}</p>\n                <p class="text mb-1">Current CGPA: ${e}</p>\n                <p class="text mb-1">Additional Credits: ${s}</p>\n                <p class="text mb-1">Required GPA: ${a}</p>\n                <hr>\n                <p class="text mt-1">${o}</p>\n            `)}}()})),$("#gpa-link").click((function(){i()})),$("#cgpa-link").click((function(){r()})),$("#calculator-type").change((function(){var e=$(this).val();"gpa"===e?i():"cgpa"===e&&r()})),$(".tooltip-icon").on("mouseenter",(function(){var e=$(this),t=e.data("tooltip"),o=$('<div class="tooltip"></div>').text(t);$("body").append(o);var n=e.offset(),s=o.outerWidth(),a=o.outerHeight(),i=n.left+e.outerWidth()/2-s/2,r=n.top-a;o.css({top:r,left:i,opacity:1}),o.offset().top<0&&o.css("top",n.top+e.outerHeight()),o.offset().left<0&&o.css("left",0),o.offset().left+s>$(window).width()&&o.css("left",$(window).width()-s),o.offset().top+a>$(window).height()&&o.css("top",n.top-a),e.on("mouseleave",(function(){o.remove()}))}))}));